apiVersion: v1
kind: ConfigMap
metadata:
  name: frigate-config
data:
  config.yml: |
    detect:
      width: 1280
      height: 720
      fps: 5
      enabled: True
    cameras:
      home:
        enabled: True
        ffmpeg:
          output_args:
            record: preset-record-generic-audio-copy
          inputs:
            - path: rtsp://127.0.0.1:8554/main
              input_args: preset-rtsp-restream
              roles:
                - detect
                - record
        live:
          stream_name: main
        zones:
          computer:
            coordinates: 342,292,401,325,435,354,480,417,531,467,523,517,446,554,284,647,189,555,155,450,134,316
          bed:
            coordinates: 443,426,414,408,387,369,330,314,362,297,388,256,405,241,477,189,539,203,607,184,667,220,740,237,774,288,809,376,777,386,715,412,665,434,600,443,517,472,489,421
          kitchen:
            coordinates: 273,556,172,630,168,695,743,720,1280,720,1280,604,1280,480,1280,223,1022,254,530,470
        ui:
          order: 0
          dashboard: True
    mqtt:
      enabled: False
    snapshots:
      enabled: True
      retain:
        default: 30
    go2rtc:
      streams:
        main:
          - rtsp://wyze-bridge.homeassistant.svc.cluster.local:8554/studiocam
          - "ffmpeg:main#video=h264"
      webrtc:
        candidates:
          - 10.43.174.235:8555
          - stun:8555
    model:
      path: /config/model_cache/tensorrt/yolov7x-640.trt
      input_tensor: nchw
      input_pixel_format: rgb
      width: 640
      height: 640
    ffmpeg:
      hwaccel_args: preset-nvidia-h264
      output_args:
        record: -f segment -segment_time 60 -segment_format mp4 -reset_timestamps 1 -strftime 1 -c copy -an
        detect: -f rawvideo -pix_fmt yuv420p
    detectors:
      tensorrt:
        type: tensorrt
    database:
      path: /config/frigate.db
    audio:
      enabled: False
    ui:
      live_mode: mse
      timezone: America/Sao_Paulo
      use_experimental: False
      strftime_fmt: "%Y/%m/%d %H:%M"
    live:
      stream_name: home
      height: 720
      quality: 8
    rtmp:
      enabled: False
    record:
      enabled: True
      retain:
        days: 3
        mode: all
      events:
        retain:
          default: 10
          mode: motion
          objects:
            person: 15
        pre_capture: 5
        post_capture: 5
        objects:
          - person
          - cat
          - plate
          - eye glasses
          - shoe
          - handbag
          - bottle
          - fork
          - spoon
          - banana
          - apple
          - pizza
          - bed
          - desk
          - cell phone
          - tv
          - keyboard
          - knife
          - chair
          - umbrella
          - backpack

    motion:
      threshold: 30
      lightning_threshold: 0.8
      contour_area: 10
      frame_alpha: 0.01
      frame_height: 100
      improve_contrast: True
      mask:
        - 480,62,539,55,551,112,537,140,465,162,359,198,388,193,138,275,114,131,456,72,338,215,284,239,223,280,201,321,164,395,155,366,179,319,162,314,130,288
        - 1280,120,1258,41,1253,65,1236,49,1133,32,1059,25,977,34,873,25,822,38,761,32,723,42,1280,604,538,109
